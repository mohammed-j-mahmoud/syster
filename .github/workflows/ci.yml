# Meta-repo CI workflow
# This repo is a meta-repository that aggregates submodules.
# Each submodule has its own CI workflow.
# This workflow validates that submodules are properly configured.

name: CI

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  validate-submodules:
    name: Validate Submodules
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          submodules: true
      
      - name: Check submodule configuration
        run: |
          echo "Validating submodule configuration..."
          git submodule status
          echo "All submodules are properly configured."
      
      - name: Validate structure
        run: |
          echo "Checking repository structure..."
          for dir in base cli language-server language-client modeller viewer diagram-core diagram-ui pipelines; do
            if [ -d "$dir" ]; then
              echo "✓ $dir exists"
            else
              echo "✗ $dir missing"
              exit 1
            fi
          done
          echo "All expected directories present."
